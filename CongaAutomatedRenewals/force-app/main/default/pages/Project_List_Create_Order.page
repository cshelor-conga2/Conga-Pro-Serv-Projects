<apex:page id="pg" standardController="PS_Project__c" extensions="ProjectCreateOrderController" recordsetVar="CrmcProjects" showHeader="true" sidebar="true" >   
    <style type="text/css">
        .custPopup{
            background-color: white; 
            background-color: rgba(255,255,255,1);  
            border-width: 2px;
            border-style: solid;
            z-index: 1002;
            left: 50%;
            padding:10px;
            position: fixed;
            /* These are the 3 css properties you will need to change so the popup 
            displays in the center of the screen. First set the width. Then set 
            margin-left to negative half of what the width is. You can add 
            the height property for a fixed size pop up if you want.*/
            width: 40%;
            
            margin-left: -20%;
            top:20px;  
            overflow: scroll;

        }
        .popupBackground{
            background-color:black;
            background-color: rgba(0,0,0,0.5); 
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 1001;
        }
        .pgTitle{
            white-space:nowrap;
        }
    </style>
    <script type="text/javascript"> 
       function noenter(ev)  {
            if (window.event && window.event.keyCode == 13 || ev.which == 13) {  
                return false;
            } else {
                return true;
            }
        }  
        //function setFocusOnLoad() {} //Uncomment if your vf page is setting focus to a control you dont want
    </script>
    <apex:form id="frm" onkeyup="return noenter(event)"> 
        <apex:actionFunction name="onFormSubmit" status="actionLoading" action="{!Cancel}"  reRender="cbs"   oncomplete="javascript:init();" />
        <apex:actionStatus id="actionLoading" stopText="">
            <apex:facet name="start">
                <apex:outputPanel styleClass="popupBackground" layout="block" >
                    <apex:outputPanel styleClass="custPopup" layout="block" > 
                        <div style=" margin-left: auto;  margin-right: auto;display:block; text-align:center; font-size: 1.3em;">
                            <h1>Please wait...</h1> <br />
                        </div>
                        <div style=" margin-left: auto;  margin-right: auto;display:block;text-align:center;">
                            <apex:image url="{!$Resource.Indeterminate_Loader}" width="30px" ></apex:image> 
                        </div>
                    </apex:outputPanel>
                 </apex:outputPanel>
            </apex:facet> 
          </apex:actionStatus> 
        <apex:pageBlock >
            <apex:pageMessages ></apex:pageMessages>  
            Select A Period:
            <apex:selectList value="{!SelectedPeriodId}" size="1" multiselect="false" required="true">
                <apex:selectOptions value="{!Periods}" ></apex:selectOptions>
            </apex:selectList>
            <apex:commandButton value="Create Orders" action="{!CreateOrder}"  status="actionLoading" disabled="{!Periods.size == 0}" ></apex:commandButton>
            <apex:commandButton value="Cancel" action="{!Cancel}" > </apex:commandButton> 
        <apex:pageBlockTable title="Results" value="{!Results}" var="r">
            <apex:column headerValue="Project">
                <a href="/{!r.Project.Id}">{!r.Project.Name}</a>
            </apex:column>
            <apex:column headerValue="Order">
                <apex:outputPanel rendered="{!r.ProjectOrder != null}">
                    <a href="/{!r.ProjectOrder.Id}">Click To View Order</a>
                </apex:outputPanel>
            </apex:column>
            <apex:column headerValue="Description">
                {!r.Details}
            </apex:column>
        </apex:pageBlockTable>
    </apex:pageBlock>
    </apex:form>
</apex:page>